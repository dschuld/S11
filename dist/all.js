function inherits(t,e){t.prototype=Object.create(e),t.prototype.constructor=t}function highlightRegion(){this.parentRegion.getParts().forEach(function(t){t.setOptions({strokeWeight:1,strokeOpacity:1})})}function unhighlightRegion(){this.parentRegion.getParts().forEach(function(t){t.setOptions({strokeOpacity:0,fillOpacity:0})})}function makeQuery(t,e){var o=t+routeDataTableId+e;return encodeURIComponent(o)}function send(t,e){var o=new XMLHttpRequest,n="sql="+e;o.open("POST",t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.setRequestHeader("Authorization","Bearer ya29.NAJPJzpZLprUzPjamDbFednMn36ujP145-BUx0_ETNBnnwr-jXdBlkizfU1_y0USgAET"),o.onreadystatechange=function(){if(console.log(o.responseText),4===o.readyState)if(200===o.status){var t=JSON.parse(o.responseText);alert("Inserted new row with rowId "+t.rows[0][0])}else alert(o.responseText)},o.send(n)}function centerMap(t,e){map.setCenter(factory.createLatLng(t,e))}function readOptions(){var t=wpdata.tripOptionsUrl?wpdata.tripOptionsUrl:"./tripOptions.json",e=wpdata.mapStyleUrl?wpdata.mapStyleUrl:"../config/mapStyle.json";$.getJSON(t,function(t){tripOptions=t,$.getJSON(e,function(t){initialize(t)})})}function initialize(t){focusser=s11.geomodel.getFocusser(),map=factory.createMap(tripOptions.initCenter[1],tripOptions.initCenter[0],tripOptions.initZoom,"googleMap",tripOptions.mapboxKey,t),map.setMapTypeId(Math.random()>tripOptions.tileServerRatio?google.maps.MapTypeId.TERRAIN:s11.util.MapTypeId.MAPBOX_CUST_OUT),factory.addEventListener(map,"click",function(t){toGeoJsonTextFromLatLng(t.latLng)}),factory.addEventListener(map,"zoom_changed",function(){if(log("zoom: "+map.getZoom()),map.getZoom()<focusser.get("focusZoom")){var t=focusser.get("part");t&&t.setVisible(!0),focusser.set("part",null)}});var e=new s11.controls.ControlsContainer(map);wpdata.restApiPath||(wpdata.restApiPath="/wp-json/wp/v2/posts/"),wpdata.wpBaseUrl||(wpdata.wpBaseUrl="http://192.168.1.58/wordpress/");var o=new s11.wpapi.WordpressConnector(wpdata.wpBaseUrl,wpdata.restApiPath),n={map:map,trip:trip,factory:factory,tripOptions:tripOptions,log:function(t){log(t)},controls:e,wpApi:o};s11.pluginLoader.init(n),tripOptions.debugWindow&&$("#debug-window").html("<textarea id='debug' readonly='true'>").show()}function toGeoJsonTextFromLatLng(t){var e='{"type":"Point","coordinates":['+t.lng()+","+t.lat()+"]}";return log(e),e}function toGeoJsonText(t){var e=t.getPosition(),o='{"type":"Point","coordinates":['+e.lng()+","+e.lat()+"]}";return o}function log(t){var e=$("#debug");0===e.length?logBuffer+=t+"\n":(logBuffer&&(e.append(logBuffer),logBuffer=null),e.val(t+"\n"+e.val())),console.log(t)}function addGeocodeInfo(t,e){s11.util.geocodeLatLng(t,function(t){e.getMarker().name=t[1].formatted_address+"<br>"+e.getMarker().name})}function placesDataHandler(t){return function(e){var o=e.rows.filter(function(t){var e=!t[3];return e})[0][2];e.rows.forEach(function(e){if(e[3]){var n=e[0],r=e[1],i=e[2]?e[2]:o,a=e[3],s=e[4],u=JSON.parse(a),c=s11.util.loadGeoJSON(u,{strokeColor:"#000000",strokeOpacity:1,strokeWeight:1,fillColor:"#AAAAAA",fillOpacity:.5}),l=s11.geomodel.Place.createFromData(n,i,c.position);l.setMap(t.map),s&&configureVisibility(s,l,t),l.setInfoWindowContentProvider(s11.ui.getContentProvider(r,n,t.wpApi)),t.factory.addEventListener(l.getMarker(),"click",s11.ui.InfoWindow.show),t.trip.addPlaces(l)}}),s11.pluginLoader.onLoad(places_PLUGIN_ID,!0)}}function regionDataHandler(t,e,o){if(t.rows){t.rows.forEach(function(t){if(t[0]){var o=getRegionDef(t);log("Adding region: "+t[0]);var n=new s11.geomodel.Region(e.tripOptions.regions.color);n.addParts(o),n.setMap(e.map),e.trip.addRegions(n)}});var n=function(t,e){var o=1;return function(){8>=o&&e.getZoom()>8?t.forEach(function(t){t.setVisible(!1)}):o>8&&e.getZoom()<=8&&t.forEach(function(t){t.setVisible(!0)}),o=e.getZoom()}};e.factory.addEventListener(e.map,"zoom_changed",n(e.trip.getRegions(),e.map)),o(null,"region")}}function addRoutesAndRegions(t){var e=t.tripOptions,o=new s11.data.DataProvider(e.fusionTableApiKey,e.routeDataTableId,e.regionDataTableId,e.placeDataTableId);async.parallel([function(e){o.selectAllVisibleRoutes(function(o){routeDataHandler(o,t,e)})},function(e){o.selectVisibleRegions(function(o){regionDataHandler(o,t,e)})}],function(t){t?s11.pluginLoader.onLoad(routes_regions_PLUGIN_ID,!1):s11.pluginLoader.onLoad(routes_regions_PLUGIN_ID,!0)})}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.async={})}(this,function(t){"use strict";function e(t,e,o){var n=o.length;switch(n){case 0:return t.call(e);case 1:return t.call(e,o[0]);case 2:return t.call(e,o[0],o[1]);case 3:return t.call(e,o[0],o[1],o[2])}return t.apply(e,o)}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function n(t){var e=o(t)?Qt.call(t):"";return e==Zt||e==Yt}function r(t){if(o(t)){var e=n(t.valueOf)?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ee,"");var r=ne.test(t);return r||re.test(t)?ie(t.slice(2),r?2:8):oe.test(t)?te:+t}function i(t){if(!t)return 0===t?t:0;if(t=r(t),t===ae||t===-ae){var e=0>t?-1:1;return e*se}var o=t%1;return t===t?o?t-o:t:0}function a(t,o){if("function"!=typeof t)throw new TypeError(ue);return o=ce(void 0===o?t.length-1:i(o),0),function(){for(var n=arguments,r=-1,i=ce(n.length-o,0),a=Array(i);++r<i;)a[r]=n[o+r];switch(o){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(o+1);for(r=-1;++r<o;)s[r]=n[r];return s[o]=a,e(t,this,s)}}function s(t){return a(function(e,o){var n=a(function(o){var n=this,r=o.pop();return t(e,function(t,e,r){t.apply(n,o.concat([r]))},r)});return o.length?n.apply(this,o):n})}function u(t,e){var o;if("function"!=typeof e)throw new TypeError(le);return t=i(t),function(){return--t>0&&(o=e.apply(this,arguments)),1>=t&&(e=void 0),o}}function c(t){return u(2,t)}function l(){}function p(t){return function(e){return null==e?void 0:e[t]}}function f(t){return"number"==typeof t&&t>-1&&t%1==0&&fe>=t}function d(t){return null!=t&&!("function"==typeof t&&n(t))&&f(pe(t))}function g(t,e){return ge.call(t,e)||"object"==typeof t&&e in t&&null===he(t)}function h(t){return me(Object(t))}function m(t,e){for(var o=-1,n=Array(t);++o<t;)n[o]=e(o);return n}function v(t){return!!t&&"object"==typeof t}function y(t){return v(t)&&d(t)}function w(t){return y(t)&&we.call(t,"callee")&&(!Le.call(t,"callee")||be.call(t)==ve)}function b(t){return"string"==typeof t||!Pe(t)&&v(t)&&Me.call(t)==ke}function L(t){var e=t?t.length:void 0;return f(e)&&(Pe(t)||b(t)||w(t))?m(e,String):null}function P(t,e){return t="number"==typeof t||Oe.test(t)?+t:-1,e=null==e?Ie:e,t>-1&&t%1==0&&e>t}function k(t){var e=t&&t.constructor,o="function"==typeof e&&e.prototype||Ee;return t===o}function T(t){var e=k(t);if(!e&&!d(t))return h(t);var o=L(t),n=!!o,r=o||[],i=r.length;for(var a in t)!g(t,a)||n&&("length"==a||P(a,i))||e&&"constructor"==a||r.push(a);return r}function M(t){var e,o=-1;if(d(t))return e=t.length,function(){return o++,e>o?o:null};var n=T(t);return e=n.length,function(){return o++,e>o?n[o]:null}}function I(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function O(t,e,o){function n(t){a--,t?o(t):null===r&&0>=a&&o(null)}o=c(o||l),t=t||[];for(var r,i=M(t),a=0;null!=(r=i());)a+=1,e(t[r],r,I(n));0===a&&o(null)}function E(t,e,o){function n(){var a=!0;return null===i?o(null):(e(t[i],i,I(function(t){if(t)o(t);else{if(i=r(),null===i)return o(null);a?Se(n):n()}})),void(a=!1))}o=c(o||l),t=t||[];var r=M(t),i=r();n()}function C(t){return a(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(i){return r(i)}o(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,n)})}function x(t,e){for(var o=-1,n=t.length;++o<n&&e(t[o],o,t)!==!1;);return t}function S(t,e){for(var o=-1,n=t.length;++o<n;)if(!e(t[o],o,t))return!1;return!0}function A(t){return function(e,o,n){for(var r=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++r];if(o(i[u],u,i)===!1)break}return e}}function R(t,e){return t&&Fe(t,e,T)}function F(t){return t}function j(t){return"function"==typeof t?t:F}function D(t,e){return t&&R(t,j(e))}function N(t,e,o){for(var n=t.length,r=e+(o?0:-1);o?r--:++r<n;){var i=t[r];if(i!==i)return r}return-1}function _(t,e,o){if(e!==e)return N(t,o);for(var n=o-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function B(t,e,o){var n=t?t.length:0;return n?(o=i(o),0>o&&(o=je(n+o,0)),_(t,e,o)):-1}function G(t,e,o){function n(t){h.unshift(t)}function r(t){var e=B(h,t);e>=0&&h.splice(e,1)}function i(){u--,x(h.slice(),function(t){t()})}"function"==typeof arguments[1]&&(o=e,e=null),o=c(o||l);var s=T(t),u=s.length;if(!u)return o(null);e||(e=u);var p={},f=0,d=!1,h=[];n(function(){u||o(null,p)}),x(s,function(s){function u(){return e>f&&!g(p,s)&&S(v,function(t){return g(p,t)})}function c(){u()&&(f++,r(c),h[h.length-1](m,p))}if(!d){for(var l,h=Pe(t[s])?t[s]:[t[s]],m=a(function(t,e){if(f--,e.length<=1&&(e=e[0]),t){var n={};D(p,function(t,e){n[e]=t}),n[s]=e,d=!0,o(t,n)}else p[s]=e,Se(i)}),v=h.slice(0,h.length-1),y=v.length;y--;){if(!(l=t[v[y]]))throw new Error("Has non-existent dependency in "+v.join(", "));if(Pe(l)&&B(l,s)>=0)throw new Error("Has cyclic dependencies")}u()?(f++,h[h.length-1](m,p)):n(c)}})}function W(t,e){for(var o=-1,n=t.length,r=Array(n);++o<n;)r[o]=e(t[o],o,t);return r}function U(t,e,o){function n(t,e,o,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");return t.started=!0,Pe(e)||(e=[e]),0===e.length&&t.idle()?Se(function(){t.drain()}):(x(e,function(e){var r={data:e,callback:n||l};o?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()}),void Se(t.process))}function r(t,e){return function(){i-=1;var o=!1,n=arguments;x(e,function(t){x(a,function(e,n){e!==t||o||(a.splice(n,1),o=!0)}),t.callback.apply(t,n)}),t.tasks.length+i===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,a=[],s={tasks:[],concurrency:e,payload:o,saturated:l,empty:l,drain:l,started:!1,paused:!1,push:function(t,e){n(s,t,!1,e)},kill:function(){s.drain=l,s.tasks=[]},unshift:function(t,e){n(s,t,!0,e)},process:function(){for(;!s.paused&&i<s.concurrency&&s.tasks.length;){var e=s.payload?s.tasks.splice(0,s.payload):s.tasks.splice(0,s.tasks.length),o=W(e,p("data"));0===s.tasks.length&&s.empty(),i+=1,a.push(e[0]);var n=I(r(s,e));t(o,n)}},length:function(){return s.tasks.length},running:function(){return i},workersList:function(){return a},idle:function(){return s.tasks.length+i===0},pause:function(){s.paused=!0},resume:function(){if(s.paused!==!1){s.paused=!1;for(var t=Math.min(s.concurrency,s.tasks.length),e=1;t>=e;e++)Se(s.process)}}};return s}function z(t,e){return U(t,1,e)}function J(t,e,o,n){E(t,function(t,n,r){o(e,t,function(t,o){e=o,r(t)})},function(t){n(t,e)})}function V(){var t=arguments;return a(function(e){var o=this,n=e[e.length-1];"function"==typeof n?e.pop():n=l,J(t,e,function(t,e,n){e.apply(o,t.concat([a(function(t,e){n(t,e)})]))},function(t,e){n.apply(o,[t].concat(e))})})}function $(){return V.apply(null,De.call(arguments))}function q(t,e,o,n){var r=[];t(e,function(t,e,n){o(t,function(t,e){r=r.concat(e||[]),n(t)})},function(t){n(t,r)})}function X(t){return function(e,o,n){return t(O,e,o,n)}}function H(t){return function(e,o,n){return t(E,e,o,n)}}function Z(t,e,o){return function(n,r,i,a){function s(t){a&&(t?a(t):a(null,o(!1,void 0)))}function u(t,n,r){return a?void i(t,function(n,s){a&&(n?(a(n),a=i=!1):e(s)&&(a(null,o(!0,t)),a=i=!1)),r()}):r()}arguments.length>3?t(n,r,u,s):(a=i,i=r,t(n,u,s))}}function Y(t,e){return e}function K(t){return function(e,o,n){n=c(n||l),e=e||[];var r=M(e);if(0>=t)return n(null);var i=!1,a=0,s=!1;!function u(){if(i&&0>=a)return n(null);for(;t>a&&!s;){var c=r();if(null===c)return i=!0,void(0>=a&&n(null));a+=1,o(e[c],c,I(function(t){a-=1,t?(n(t),s=!0):u()}))}}()}}function Q(t,e,o,n){K(e)(t,o,n)}function tt(t){return a(function(e,o){e.apply(null,o.concat([a(function(e,o){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&x(o,function(e){console[t](e)}))})]))})}function et(t,e,o){o=o||l;var n=a(function(e,n){e?o(e):(n.push(r),t.apply(this,n))}),r=function(t,r){return t?o(t):r?void e(n):o(null)};t(r)}function ot(t,e,o){var n=0;et(function(t){return n++<1?t(null,!0):void e.apply(this,arguments)},t,o)}function nt(t,e,o){if(o=o||l,!t())return o(null);var n=a(function(r,i){return r?o(r):t.apply(this,i)?e(n):void o.apply(null,[null].concat(i))});e(n)}function rt(t,e,o){var n=0;return nt(function(){return++n<=1||e.apply(this,arguments)},t,o)}function it(t,e,o){return rt(t,function(){return!e.apply(this,arguments)},o)}function at(t){return function(e,o,n){return t(e,n)}}function st(t,e,o){return O(t,at(e),o)}function ut(t,e,o,n){return K(e)(t,at(o),n)}function ct(t,e,o){return E(t,at(e),o)}function lt(t){return a(function(e){var o=e.pop(),n=!0;e.push(function(){var t=arguments;n?Se(function(){o.apply(null,t)}):o.apply(null,t)}),t.apply(this,e),n=!1})}function pt(t){return!t}function ft(t,e,o,n){var r=[];t(e,function(t,e,n){o(t,function(o,i){o?n(o):(i&&r.push({index:e,value:t}),n())})},function(t){t?n(t):n(null,W(r.sort(function(t,e){return t.index-e.index}),p("value")))})}function dt(t){return function(e,o,n,r){return t(K(o),e,n,r)}}function gt(t,e){function o(t){return t?n(t):void r(o)}var n=I(e||l),r=lt(t);o()}function ht(t){function e(o){function n(){return t.length&&t[o].apply(null,arguments),n.next()}return n.next=function(){return o<t.length-1?e(o+1):null},n}return e(0)}function mt(t,e,o,n){n=c(n||l),e=e||[];var r=d(e)?[]:{};t(e,function(t,e,n){o(t,function(t,o){r[e]=o,n(t)})},function(t){n(t,r)})}function vt(t){return t&&t.Object===Object?t:null}function yt(t){return"symbol"==typeof t||v(t)&&lo.call(t)==uo}function wt(t){if("string"==typeof t)return t;if(null==t)return"";if(yt(t))return so?go.call(t):"";var e=t+"";return"0"==e&&1/t==-po?"-0":e}function bt(t){var e=[];return wt(t).replace(ho,function(t,o,n,r){e.push(n?r.replace(mo,"$1"):o||t)}),e}function Lt(t){return Pe(t)?t:bt(t)}function Pt(t,e){return"number"==typeof t?!0:!Pe(t)&&(yo.test(t)||!vo.test(t)||null!=e&&t in Object(e))}function kt(t){var e=t?t.length:0;return e?t[e-1]:void 0}function Tt(t,e,o){var n=-1,r=t.length;0>e&&(e=-e>r?0:r+e),o=o>r?r:o,0>o&&(o+=r),r=e>o?0:o-e>>>0,e>>>=0;for(var i=Array(r);++n<r;)i[n]=t[n+e];return i}function Mt(t,e){e=Pt(e,t)?[e+""]:Lt(e);for(var o=0,n=e.length;null!=t&&n>o;)t=t[e[o++]];return o&&o==n?t:void 0}function It(t,e,o){var n=null==t?void 0:Mt(t,e);return void 0===n?o:n}function Ot(t,e){return 1==e.length?t:It(t,Tt(e,0,-1))}function Et(t,e,o){if(null==t)return!1;var n=o(t,e);n||Pt(e)||(e=Lt(e),t=Ot(t,e),null!=t&&(e=kt(e),n=o(t,e)));var r=t?t.length:void 0;return n||!!r&&f(r)&&P(e,r)&&(Pe(t)||b(t)||w(t))}function Ct(t,e){return Et(t,e,g)}function xt(t,e){var o=Object.create(null),n=Object.create(null);e=e||F;var r=a(function(r){var i=r.pop(),s=e.apply(null,r);Ct(o,s)?Se(function(){i.apply(null,o[s])}):Ct(n,s)?n[s].push(i):(n[s]=[i],t.apply(null,r.concat([a(function(t){o[s]=t;var e=n[s];delete n[s];for(var r=0,i=e.length;i>r;r++)e[r].apply(null,t)})])))});return r.memo=o,r.unmemoized=t,r}function St(t,e,o){o=o||l;var n=d(e)?[]:{};t(e,function(t,e,o){t(a(function(t,r){r.length<=1&&(r=r[0]),n[e]=r,o(t)}))},function(t){o(t,n)})}function At(t,e){return St(O,t,e)}function Rt(t,e,o){return St(K(e),t,o)}function Ft(t,e){return U(function(e,o){t(e[0],o)},e,1)}function jt(t,e){function o(t,e){return t.priority-e.priority}function n(t,e,o){for(var n=-1,r=t.length-1;r>n;){var i=n+(r-n+1>>>1);o(e,t[i])>=0?n=i:r=i-1}return n}function r(t,e,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return t.started=!0,Pe(e)||(e=[e]),0===e.length?Se(function(){t.drain()}):void x(e,function(e){var a={data:e,priority:r,callback:"function"==typeof i?i:l};t.tasks.splice(n(t.tasks,a,o)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),Se(t.process)})}var i=Ft(t,e);return i.push=function(t,e,o){r(i,t,e,o)},delete i.unshift,i}function Dt(t,e,o,n){var r=bo.call(t).reverse();J(r,e,o,n)}function Nt(t,e,o,n){ft(t,e,function(t,e){o(t,function(t,o){t?e(t):e(null,!o)})},n)}function _t(t,e){return St(E,t,e)}function Bt(t,e,o){function n(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||a}}function r(t,e){function o(t,o){return function(n){t(function(t,e){n(!t||o,{err:t,result:e})},e)}}function n(t){return function(e){setTimeout(function(){e(null)},t)}}for(;u.times;){var r=!(u.times-=1);s.push(o(u.task,r)),!r&&u.interval>0&&s.push(n(u.interval))}_t(s,function(e,o){o=o[o.length-1],(t||u.callback)(o.err,o.result)})}var i=5,a=0,s=[],u={times:i,interval:a},c=arguments.length;if(1>c||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=c&&"function"==typeof t&&(o=e,e=t),"function"!=typeof t&&n(u,t),u.callback=o,u.task=e,u.callback?r():r}function Gt(t,e,o){function n(t,e){var o=t.criteria,n=e.criteria;return n>o?-1:o>n?1:0}Ze(t,function(t,o){e(t,function(e,n){return e?o(e):void o(null,{value:t,criteria:n})})},function(t,e){return t?o(t):void o(null,W(e.sort(n),p("value")))})}function Wt(t,e,o,n){for(var r=-1,i=Oo(Io((e-t)/(o||1)),0),a=Array(i);i--;)a[n?i:++r]=t,t+=o;return a}function Ut(t,e,o){Ze(Wt(0,t,1),e,o)}function zt(t,e,o,n){return Ye(Wt(0,t,1),e,o,n)}function Jt(t,e,o){Ke(Wt(0,t,1),e,o)}function Vt(t,e,o,n){3===arguments.length&&(n=o,o=e,e=Pe(t)?[]:{}),O(t,function(t,n,r){o(e,t,n,r)},function(t){n(t,e)})}function $t(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function qt(t,e,o){return nt(function(){return!t.apply(this,arguments)},e,o)}function Xt(t,e){function o(t){return a(function(n,r){if(n)e.apply(null,[n].concat(r));else{var i=t.next();i?r.push(o(i)):r.push(e),lt(t).apply(null,r)}})}return e=c(e||l),Pe(t)?t.length?void o(ht(t))():e():e(new Error("First argument to waterfall must be an array of functions"))}var Ht,Zt="[object Function]",Yt="[object GeneratorFunction]",Kt=Object.prototype,Qt=Kt.toString,te=NaN,ee=/^\s+|\s+$/g,oe=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ie=parseInt,ae=1/0,se=1.7976931348623157e308,ue="Expected a function",ce=Math.max,le="Expected a function",pe=p("length"),fe=9007199254740991,de=Object.prototype,ge=de.hasOwnProperty,he=Object.getPrototypeOf,me=Object.keys,ve="[object Arguments]",ye=Object.prototype,we=ye.hasOwnProperty,be=ye.toString,Le=ye.propertyIsEnumerable,Pe=Array.isArray,ke="[object String]",Te=Object.prototype,Me=Te.toString,Ie=9007199254740991,Oe=/^(?:0|[1-9]\d*)$/,Ee=Object.prototype,Ce=s(O),xe="function"==typeof setImmediate&&setImmediate;Ht=xe?function(t){xe(t)}:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:function(t){setTimeout(t,0)};var Se=Ht,Ae=s(E),Re=a(function(t,e){return a(function(o){return t.apply(null,e.concat(o))})}),Fe=A(),je=Math.max,De=Array.prototype.reverse,Ne=X(q),_e=H(q),Be=a(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),Ge=Z(O,F,Y),We=Z(Q,F,Y),Ue=Z(E,F,Y),ze=tt("dir"),Je=Z(O,pt,pt),Ve=Z(Q,pt,pt),$e=X(ft),qe=dt(ft),Xe=H(ft),He=tt("log"),Ze=X(mt),Ye=dt(mt),Ke=H(mt),Qe={"function":!0,object:!0},to=Qe[typeof t]&&t&&!t.nodeType?t:null,eo=Qe[typeof module]&&module&&!module.nodeType?module:null,oo=vt(to&&eo&&"object"==typeof global&&global),no=vt(Qe[typeof self]&&self),ro=vt(Qe[typeof window]&&window),io=vt(Qe[typeof this]&&this),ao=oo||ro!==(io&&io.window)&&ro||no||io||Function("return this")(),so=ao.Symbol,uo="[object Symbol]",co=Object.prototype,lo=co.toString,po=1/0,fo=so?so.prototype:void 0,go=so?fo.toString:void 0,ho=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,mo=/\\(\\)?/g,vo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yo=/^\w*$/,wo="object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:Se,bo=Array.prototype.slice,Lo=X(Nt),Po=dt(Nt),ko=H(Nt),To=Z(O,Boolean,F),Mo=Z(Q,Boolean,F),Io=Math.ceil,Oo=Math.max,Eo={applyEach:Ce,applyEachSeries:Ae,apply:Re,asyncify:C,auto:G,cargo:z,compose:$,concat:Ne,concatSeries:_e,constant:Be,detect:Ge,detectLimit:We,detectSeries:Ue,dir:ze,doDuring:ot,doUntil:it,doWhilst:rt,during:et,each:st,eachLimit:ut,eachOf:O,eachOfLimit:Q,eachOfSeries:E,eachSeries:ct,ensureAsync:lt,every:Je,everyLimit:Ve,filter:$e,filterLimit:qe,filterSeries:Xe,forever:gt,iterator:ht,log:He,map:Ze,mapLimit:Ye,mapSeries:Ke,memoize:xt,nextTick:wo,parallel:At,parallelLimit:Rt,priorityQueue:jt,queue:Ft,reduce:J,reduceRight:Dt,reject:Lo,rejectLimit:Po,rejectSeries:ko,retry:Bt,seq:V,series:_t,setImmediate:Se,some:To,someLimit:Mo,sortBy:Gt,times:Ut,timesLimit:zt,timesSeries:Jt,transform:Vt,unmemoize:$t,until:qt,waterfall:Xt,whilst:nt,all:Je,any:To,forEach:st,forEachSeries:ct,forEachLimit:ut,forEachOf:O,forEachOfSeries:E,forEachOfLimit:Q,inject:J,foldl:J,foldr:Dt,select:$e,selectLimit:qe,selectSeries:Xe,wrapSync:C};t["default"]=Eo,t.applyEach=Ce,t.applyEachSeries=Ae,t.apply=Re,t.asyncify=C,t.auto=G,t.cargo=z,t.compose=$,t.concat=Ne,t.concatSeries=_e,t.constant=Be,t.detect=Ge,t.detectLimit=We,t.detectSeries=Ue,t.dir=ze,t.doDuring=ot,t.doUntil=it,t.doWhilst=rt,t.during=et,t.each=st,t.eachLimit=ut,t.eachOf=O,t.eachOfLimit=Q,t.eachOfSeries=E,t.eachSeries=ct,t.ensureAsync=lt,t.every=Je,t.everyLimit=Ve,t.filter=$e,t.filterLimit=qe,t.filterSeries=Xe,t.forever=gt,t.iterator=ht,t.log=He,t.map=Ze,t.mapLimit=Ye,t.mapSeries=Ke,t.memoize=xt,t.nextTick=wo,t.parallel=At,t.parallelLimit=Rt,t.priorityQueue=jt,t.queue=Ft,t.reduce=J,t.reduceRight=Dt,t.reject=Lo,t.rejectLimit=Po,t.rejectSeries=ko,t.retry=Bt,t.seq=V,t.series=_t,t.setImmediate=Se,t.some=To,t.someLimit=Mo,t.sortBy=Gt,t.times=Ut,t.timesLimit=zt,t.timesSeries=Jt,t.transform=Vt,t.unmemoize=$t,t.until=qt,t.waterfall=Xt,t.whilst=nt,t.all=Je,t.any=To,t.forEach=st,t.forEachSeries=ct,t.forEachLimit=ut,t.forEachOf=O,t.forEachOfSeries=E,t.forEachOfLimit=Q,t.inject=J,t.foldl=J,t.foldr=Dt,t.select=$e,t.selectLimit=qe,t.selectSeries=Xe,t.wrapSync=C}),function(){function t(t){return function(e){this[t]=e}}function e(t){return function(){return this[t]}}function o(t,e,r){this.extend(o,google.maps.OverlayView),this.c=t,this.a=[],this.f=[],this.ca=[53,56,66,78,90],this.j=[],this.A=!1,r=r||{},this.g=r.gridSize||60,this.l=r.minimumClusterSize||2,this.J=r.maxZoom||g,this.j=r.styles||[],this.X=r.imagePath||this.Q,this.W=r.imageExtension||this.P,this.O=!0,void 0!=r.zoomOnClick&&(this.O=r.zoomOnClick),this.r=!1,void 0!=r.averageCenter&&(this.r=r.averageCenter),n(this),this.setMap(t),this.K=this.c.getZoom();var i=this;google.maps.event.addListener(this.c,"zoom_changed",function(){var t=i.c.getZoom();i.K!=t&&(i.K=t,i.m())}),google.maps.event.addListener(this.c,"idle",function(){i.i()}),e&&e.length&&this.C(e,!1)}function n(t){if(!t.j.length)for(var e,o=0;e=t.ca[o];o++)t.j.push({url:t.X+(o+1)+"."+t.W,height:e,width:e})}function r(t,e){e.s=!1,e.draggable&&google.maps.event.addListener(e,"dragend",function(){e.s=!1,t.L()}),t.a.push(e)}function i(t,e){var o=-1;if(t.a.indexOf)o=t.a.indexOf(e);else for(var n,r=0;n=t.a[r];r++)if(n==e){o=r;break}return-1==o?!1:(e.setMap(g),t.a.splice(o,1),!0)}function a(t){if(t.A)for(var e,o=t.v(new google.maps.LatLngBounds(t.c.getBounds().getSouthWest(),t.c.getBounds().getNorthEast())),n=0;e=t.a[n];n++)if(!e.s&&o.contains(e.getPosition())){for(var r=t,i=4e4,a=g,u=0,c=void 0;c=r.f[u];u++){var l=c.getCenter();if(l){var p=e.getPosition();if(l&&p)var f=(p.lat()-l.lat())*Math.PI/180,d=(p.lng()-l.lng())*Math.PI/180,l=Math.sin(f/2)*Math.sin(f/2)+Math.cos(l.lat()*Math.PI/180)*Math.cos(p.lat()*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2),l=12742*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));else l=0;i>l&&(i=l,a=c)}}a&&a.F.contains(e.getPosition())?a.q(e):(c=new s(r),c.q(e),r.f.push(c))}}function s(t){this.k=t,this.c=t.getMap(),this.g=t.w(),this.l=t.l,this.r=t.r,this.d=g,this.a=[],this.F=g,this.n=new c(this,t.z(),t.w())}function u(t){t.F=t.k.v(new google.maps.LatLngBounds(t.d,t.d))}function c(t,e,o){t.k.extend(c,google.maps.OverlayView),this.j=e,this.fa=o||0,this.u=t,this.d=g,this.c=t.getMap(),this.B=this.b=g,this.t=!1,this.setMap(this.c)}function l(t,e){var o=t.getProjection().fromLatLngToDivPixel(e);return o.x-=parseInt(t.p/2,10),o.y-=parseInt(t.h/2,10),o}function p(t){t.b&&(t.b.style.display="none"),t.t=!1}function f(t,e){var o=[];return o.push("background-image:url("+t.da+");"),o.push("background-position:"+(t.D?t.D:"0 0")+";"),"object"==typeof t.e?("number"==typeof t.e[0]&&t.e[0]>0&&t.e[0]<t.h?o.push("height:"+(t.h-t.e[0])+"px; padding-top:"+t.e[0]+"px;"):o.push("height:"+t.h+"px; line-height:"+t.h+"px;"),"number"==typeof t.e[1]&&t.e[1]>0&&t.e[1]<t.p?o.push("width:"+(t.p-t.e[1])+"px; padding-left:"+t.e[1]+"px;"):o.push("width:"+t.p+"px; text-align:center;")):o.push("height:"+t.h+"px; line-height:"+t.h+"px; width:"+t.p+"px; text-align:center;"),o.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+(t.M?t.M:"black")+"; position:absolute; font-size:"+(t.N?t.N:11)+"px; font-family:Arial,sans-serif; font-weight:bold"),o.join("")}var d,g=null;d=o.prototype,d.Q="https://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",d.P="png",d.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},d.onAdd=function(){this.A||(this.A=!0,a(this))},d.draw=function(){},d.S=function(){for(var t,e=this.o(),o=new google.maps.LatLngBounds,n=0;t=e[n];n++)o.extend(t.getPosition());this.c.fitBounds(o)},d.z=e("j"),d.o=e("a"),d.V=function(){return this.a.length},d.ba=t("J"),d.I=e("J"),d.G=function(t,e){for(var o=0,n=t.length,r=n;0!==r;)r=parseInt(r/10,10),o++;return o=Math.min(o,e),{text:n,index:o}},d.$=t("G"),d.H=e("G"),d.C=function(t,e){for(var o,n=0;o=t[n];n++)r(this,o);e||this.i()},d.q=function(t,e){r(this,t),e||this.i()},d.Y=function(t,e){var o=i(this,t);return!e&&o?(this.m(),this.i(),!0):!1},d.Z=function(t,e){for(var o,n=!1,r=0;o=t[r];r++)o=i(this,o),n=n||o;return!e&&n?(this.m(),this.i(),!0):void 0},d.U=function(){return this.f.length},d.getMap=e("c"),d.setMap=t("c"),d.w=e("g"),d.aa=t("g"),d.v=function(t){var e=this.getProjection(),o=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),n=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(o);return o.x+=this.g,o.y-=this.g,n=e.fromLatLngToDivPixel(n),n.x-=this.g,n.y+=this.g,o=e.fromDivPixelToLatLng(o),e=e.fromDivPixelToLatLng(n),t.extend(o),t.extend(e),t},d.R=function(){this.m(!0),this.a=[]},d.m=function(t){for(var e,o=0;e=this.f[o];o++)e.remove();for(o=0;e=this.a[o];o++)e.s=!1,t&&e.setMap(g);this.f=[]},d.L=function(){var t=this.f.slice();this.f.length=0,this.m(),this.i(),window.setTimeout(function(){for(var e,o=0;e=t[o];o++)e.remove()},0)},d.i=function(){a(this)},d=s.prototype,d.q=function(t){var e;t:if(this.a.indexOf)e=-1!=this.a.indexOf(t);else{e=0;for(var o;o=this.a[e];e++)if(o==t){e=!0;break t}e=!1}if(e)return!1;if(this.d?this.r&&(o=this.a.length+1,e=(this.d.lat()*(o-1)+t.getPosition().lat())/o,o=(this.d.lng()*(o-1)+t.getPosition().lng())/o,this.d=new google.maps.LatLng(e,o),u(this)):(this.d=t.getPosition(),u(this)),t.s=!0,this.a.push(t),e=this.a.length,e<this.l&&t.getMap()!=this.c&&t.setMap(this.c),e==this.l)for(o=0;e>o;o++)this.a[o].setMap(g);if(e>=this.l&&t.setMap(g),t=this.c.getZoom(),(e=this.k.I())&&t>e)for(t=0;e=this.a[t];t++)e.setMap(this.c);else this.a.length<this.l?p(this.n):(e=this.k.H()(this.a,this.k.z().length),this.n.setCenter(this.d),t=this.n,t.B=e,t.ga=e.text,t.ea=e.index,t.b&&(t.b.innerHTML=e.text),e=Math.max(0,t.B.index-1),e=Math.min(t.j.length-1,e),e=t.j[e],t.da=e.url,t.h=e.height,t.p=e.width,t.M=e.textColor,t.e=e.anchor,t.N=e.textSize,t.D=e.backgroundPosition,this.n.show());return!0},d.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.d,this.d),o=this.o(),n=0;t=o[n];n++)e.extend(t.getPosition());return e},d.remove=function(){this.n.remove(),this.a.length=0,delete this.a},d.T=function(){return this.a.length},d.o=e("a"),d.getCenter=e("d"),d.getMap=e("c"),d=c.prototype,d.onAdd=function(){this.b=document.createElement("DIV"),this.t&&(this.b.style.cssText=f(this,l(this,this.d)),this.b.innerHTML=this.B.text),this.getPanes().overlayMouseTarget.appendChild(this.b);var t=this;google.maps.event.addDomListener(this.b,"click",function(){var e=t.u.k;google.maps.event.trigger(e,"clusterclick",t.u),e.O&&t.c.fitBounds(t.u.getBounds())})},d.draw=function(){if(this.t){var t=l(this,this.d);this.b.style.top=t.y+"px",this.b.style.left=t.x+"px"}},d.show=function(){this.b&&(this.b.style.cssText=f(this,l(this,this.d)),this.b.style.display=""),this.t=!0},d.remove=function(){this.setMap(g)},d.onRemove=function(){this.b&&this.b.parentNode&&(p(this),this.b.parentNode.removeChild(this.b),this.b=g)},d.setCenter=t("d"),window.MarkerClusterer=o,o.prototype.addMarker=o.prototype.q,o.prototype.addMarkers=o.prototype.C,o.prototype.clearMarkers=o.prototype.R,o.prototype.fitMapToMarkers=o.prototype.S,o.prototype.getCalculator=o.prototype.H,o.prototype.getGridSize=o.prototype.w,o.prototype.getExtendedBounds=o.prototype.v,o.prototype.getMap=o.prototype.getMap,o.prototype.getMarkers=o.prototype.o,o.prototype.getMaxZoom=o.prototype.I,o.prototype.getStyles=o.prototype.z,o.prototype.getTotalClusters=o.prototype.U,o.prototype.getTotalMarkers=o.prototype.V,o.prototype.redraw=o.prototype.i,o.prototype.removeMarker=o.prototype.Y,o.prototype.removeMarkers=o.prototype.Z,o.prototype.resetViewport=o.prototype.m,o.prototype.repaint=o.prototype.L,o.prototype.setCalculator=o.prototype.$,o.prototype.setGridSize=o.prototype.aa,o.prototype.setMaxZoom=o.prototype.ba,o.prototype.onAdd=o.prototype.onAdd,o.prototype.draw=o.prototype.draw,s.prototype.getCenter=s.prototype.getCenter,s.prototype.getSize=s.prototype.T,s.prototype.getMarkers=s.prototype.o,c.prototype.onAdd=c.prototype.onAdd,c.prototype.draw=c.prototype.draw,c.prototype.onRemove=c.prototype.onRemove}();var GeoJSON=function(t,e){var o,n=function(t,e,o){var s,u=a(e);switch(t.type){case"Point":u.position=new google.maps.LatLng(t.coordinates[1],t.coordinates[0]),s=new google.maps.Marker(u),o&&s.set("geojsonProperties",o);break;case"MultiPoint":s=[];for(var c=0;c<t.coordinates.length;c++)u.position=new google.maps.LatLng(t.coordinates[c][1],t.coordinates[c][0]),s.push(new google.maps.Marker(u));if(o)for(var l=0;l<s.length;l++)s[l].set("geojsonProperties",o);break;case"LineString":for(var p=[],c=0;c<t.coordinates.length;c++){var f=t.coordinates[c],d=new google.maps.LatLng(f[1],f[0]);p.push(d)}u.path=p,s=new google.maps.Polyline(u),o&&s.set("geojsonProperties",o);break;case"MultiLineString":s=[];for(var c=0;c<t.coordinates.length;c++){for(var p=[],g=0;g<t.coordinates[c].length;g++){var f=t.coordinates[c][g],d=new google.maps.LatLng(f[1],f[0]);p.push(d)}u.path=p,s.push(new google.maps.Polyline(u))}if(o)for(var l=0;l<s.length;l++)s[l].set("geojsonProperties",o);break;case"Polygon":for(var h,m,v=[],c=0;c<t.coordinates.length;c++){for(var p=[],g=0;g<t.coordinates[c].length;g++){var d=new google.maps.LatLng(t.coordinates[c][g][1],t.coordinates[c][g][0]);p.push(d)}c?1==c?(m=i(p),h==m?v.push(p.reverse()):v.push(p)):h==m?v.push(p.reverse()):v.push(p):(h=i(p),v.push(p))}u.paths=v,s=new google.maps.Polygon(u),o&&s.set("geojsonProperties",o);break;case"MultiPolygon":s=[];for(var c=0;c<t.coordinates.length;c++){for(var h,m,v=[],g=0;g<t.coordinates[c].length;g++){for(var p=[],l=0;l<t.coordinates[c][g].length;l++){var d=new google.maps.LatLng(t.coordinates[c][g][l][1],t.coordinates[c][g][l][0]);p.push(d)}g?1==g?(m=i(p),h==m?v.push(p.reverse()):v.push(p)):h==m?v.push(p.reverse()):v.push(p):(h=i(p),
v.push(p))}u.paths=v,s.push(new google.maps.Polygon(u))}if(o)for(var l=0;l<s.length;l++)s[l].set("geojsonProperties",o);break;case"GeometryCollection":if(s=[],t.geometries)for(var c=0;c<t.geometries.length;c++)s.push(n(t.geometries[c],u,o||null));else s=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;default:s=r('Invalid GeoJSON object: Geometry object must be one of "Point", "LineString", "Polygon" or "MultiPolygon".')}return s},r=function(t){return{type:"Error",message:t}},i=function(t){for(var e,o=0,n=0;n<t.length-2;n++)o+=(t[n+1].lat()-t[n].lat())*(t[n+2].lng()-t[n].lng())-(t[n+2].lat()-t[n].lat())*(t[n+1].lng()-t[n].lng());return e=o>0?!0:!1},a=function(t){var e={};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},s=e||{};switch(t.type){case"FeatureCollection":if(t.features){o=[];for(var u=0;u<t.features.length;u++)o.push(n(t.features[u].geometry,s,t.features[u].properties))}else o=r('Invalid GeoJSON object: FeatureCollection object missing "features" member.');break;case"GeometryCollection":if(t.geometries){o=[];for(var u=0;u<t.geometries.length;u++)o.push(n(t.geometries[u],s))}else o=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');break;case"Feature":o=t.properties&&t.geometry?n(t.geometry,s,t.properties):r('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.');break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":o=t.coordinates?o=n(t,s):r('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:o=r('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString", "Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return o},s11=s11||{};s11.plugin=s11.plugin||{},s11.plugin.STATES={REGISTERED:"REGISTERED",LOADING:"LOADING",FAILED:"FAILED",ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"};var STATES=s11.plugin.STATES;s11.pluginLoader=function(){var t,e={},o={},n=function(){var o;for(o in e)r(o,STATES.LOADING),e[o](t)},r=function(e,n){o[e]=n,t&&t.log(e+": "+n)};return{addPlugin:function(o,n){e[o]=n,r(o,STATES.REGISTERED),t&&(r(o,STATES.LOADING),n(t))},logPluginList:function(){t.log(this.listPlugins())},listPlugins:function(){var t,n="Plugins: ";for(t in e)n+=t+":"+o[t]+", ";return n},init:function(e){t=e,t.log("Initialized plugin loader"),this.logPluginList(),n()},onLoad:function(t,e){e?r(t,STATES.ACTIVE):r(t,STATES.FAILED)}}}();var s11=s11||{};s11.wpapi=s11.wpapi||{},s11.wpapi.WordpressConnector=function(t,e){var o=t+e,t=t;return{getRestUrl:function(){return o},getBaseUrl:function(){return t},getPost:function(t,e){$.ajax({url:o+"?slug="+t,type:"get",beforeSend:function(){},success:function(t){e(t[0].excerpt.rendered)}})}}};var s11=s11||{};s11.data=s11.data||{},s11.data.FusionTable=function(t,e){var o=t;if(e)var n=(e.bearerId,e.key);this.select=function(t){var e="SELECT "+t+" FROM "+o,r={where:function(t){return e+=" WHERE "+t,this},groupBy:function(t){return e+=" GROUP BY "+t,this},orderBy:function(t){return e+=" ORDER BY "+t,this},execute:function(t){var o=makeURI(e,n);$.get(o,function(e,o){"success"===o&&t(e)})}};return r}};var makeURI=function(t,e){var o="https://www.googleapis.com/fusiontables/v2/query?sql="+t;return e&&(o+="&key="+e),o},s11=s11||{};s11.geomodel=s11.geomodel||{};var factory={addEventListener:function(t,e,o){google.maps.event.addListener(t,e,o)},clearListeners:function(t,e){google.maps.event.clearListeners(t,e)},addDomListener:function(t,e,o){google.maps.event.addDomListener(t,e,o)},getInfoWindow:function(t){return createInfoWindow(t)},createInfoWindow:function(t){return!this.infoWindow||t?(this.infoWindow=new google.maps.InfoWindow,this.infoWindow):this.infoWindow},createMarker:function(t){return new google.maps.Marker(t)},createPolyline:function(t){return new google.maps.Polyline(t)},createPolygon:function(t){return new google.maps.Polygon(t)},createLatLng:function(t,e){return new google.maps.LatLng(t,e)},createLatLngBounds:function(){return new google.maps.LatLngBounds},createMVCObject:function(){return new google.maps.MVCObject},computeLength:function(t){return google.maps.geometry.spherical.computeLength(t)},decodePath:function(t){return google.maps.geometry.encoding.decodePath(t)},encodePath:function(t){return google.maps.geometry.encoding.encodePath(t)},createMap:function(t,e,o,n,r,i){o||(o=3);var a={center:new google.maps.LatLng(t,e),zoom:o,mapTypeId:google.maps.MapTypeId.TERRAIN,rotateControl:!1,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_LEFT,mapTypeIds:[google.maps.MapTypeId.TERRAIN,s11.util.MapTypeId.MAPBOX_CUST_OUT]},streetViewControl:!1,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},scaleControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},styles:i,disableDoubleClickZoom:!0},s=new google.maps.Map(document.getElementById(n),a),u=createMapTypeOptions("Mapbox-Cust-Out",function(t,e){return"https://api.mapbox.com/styles/v1/dschuld/cip57q2p9000hdiluvwbmnoqp/tiles/"+e+"/"+t.x+"/"+t.y+"?access_token="+r});return registerMapType(s,u,s11.util.MapTypeId.MAPBOX_CUST_OUT),s.setMapTypeId(google.maps.MapTypeId.TERRAIN),s}},registerMapType=function(t,e,o){var n=new google.maps.ImageMapType(e);t.mapTypes.set(o,n)},createMapTypeOptions=function(t,e){return{getTileUrl:function(t,o){return e(t,o)},tileSize:new google.maps.Size(256,256),name:t,maxZoom:18}};s11.geomodel.getFactory=function(){return factory};var s11=s11||{};s11.util=s11.util||{};var factory=s11.geomodel.getFactory();s11.util.geocodeLatLng=function(t,e){var o=new google.maps.Geocoder;o.geocode({location:t},function(t,o){o===google.maps.GeocoderStatus.OK?t[1]?e(t):window.alert("No results found"):window.alert("Geocoder failed due to: "+o)})},s11.util.loadGeoJSON=function(t,e){var o=new GeoJSON(t,e);return o},s11.util.encodePathFromGeoJson=function(t,e){loadGeoJSON(t,e)},s11.util.encodePathFromGeoJsonString=function(t,e){var o=parseGeoJson(t,e);return s11.util.encodePath(o[0].getPath())},s11.util.encodePath=function(t){return google.maps.geometry.encoding.encodePath(t)},s11.util.parseGeoJson=function(t){var e=$.parseJSON(t);return s11.util.loadGeoJSON(e,{strokeColor:"#000000",strokeOpacity:1,strokeWeight:1,fillColor:"#AAAAAA",fillOpacity:.5})},s11.util.fromLatLngToPoint=function(t,e){var o=e.getProjection().fromLatLngToPoint(e.getBounds().getNorthEast()),n=e.getProjection().fromLatLngToPoint(e.getBounds().getSouthWest()),r=Math.pow(2,e.getZoom()),i=e.getProjection().fromLatLngToPoint(t);return new google.maps.Point((i.x-n.x)*r,(i.y-o.y)*r)},s11.util.MapTypeId={},s11.util.MapTypeId.OSM="osm",s11.util.MapTypeId.HIKEBIKE="hikebike",s11.util.MapTypeId.LANDSCAPE="thunderforst-landscape",s11.util.MapTypeId.OUTDOORS="thunderforst-outdoors",s11.util.MapTypeId.OTM="opentopomap",s11.util.MapTypeId.PIONEER="thunderforst-pioneer",s11.util.MapTypeId.MAPBOX="mapbox-terrain",s11.util.MapTypeId.MAPBOX_SATELLITE="mapbox-satellite",s11.util.MapTypeId.MAPBOX_STREETS="mapbox-streets",s11.util.MapTypeId.MAPBOX_CUST="mapbox-cust",s11.util.MapTypeId.MAPBOX_OUTDOORS="mapbox-outdoors",s11.util.MapTypeId.MAPBOX_CUST_OUT="mapbox-cust-out";var s11=s11||{};s11.ui=s11.ui||{};var factory=s11.geomodel.getFactory(),configureInfowindow=function(t){factory.addEventListener(t,"domready",function(){var t=$("#iw-container"),e=t.parent().parent().parent(),o=t.parent().parent();o.css({overflow:"hidden"}),e.attr("class","gm-style-iw"),removeBackgroundAndTail(e);var n=e.next();n.css({width:"27px",height:"27px",display:"inline",opacity:"1",right:"38px",top:"3px",border:"7px solid #48b5e9","border-radius":"13px","box-shadow":"0 0 5px #3990B9"}),n.mouseout(function(){$(this).css({opacity:"1"})})})},removeBackgroundAndTail=function(t){var e=t.prev();e.children(":nth-child(2)").css({display:"none"}),e.children(":nth-child(4)").css({display:"none"}),e.children(":nth-child(1)").css({display:"none"}),e.children(":nth-child(3)").css({display:"none"})},createInfoWindowContentString=function(t,e){return'<div id="iw-container"><div class="iw-title">'+t+'</div><div class="iw-content">'+e+"<p></div></div>"};s11.ui.getContentProvider=function(t,e,o){if(!t)return s11.ui.NullContentProvider.create();var t=JSON.parse(t);return t.blog?s11.ui.BlogExcerptContentProvider.create(o,e,t.blog):t.image?s11.ui.ImageContentProvider.create(e,t):t.youtube?s11.ui.YoutubeContentProvider.create(e,t.youtube):t.text?s11.ui.TextContentProvider.create(e,t.text):void 0},s11.ui.NullContentProvider=function(){return{create:function(){return{getContent:function(t){}}}}}(),s11.ui.TextContentProvider=function(){return{create:function(t,e){return{getContent:function(o){var n=createInfoWindowContentString(t,e);o(n)}}}}}(),s11.ui.YoutubeContentProvider=function(){return{create:function(t,e){return{getContent:function(o){var n='<iframe id="ytplayer" type="text/html" height="300" width="480"  src="http://www.youtube.com/embed/'+e+'" frameborder="0"/>';n=createInfoWindowContentString(t,n),o(n)}}}}}(),s11.ui.ImageContentProvider=function(){var t=function(t){return t?'<a href="'+t+'">Photo</a>':""},e=function(t,e){if(!e)return"";var o=" / ";return t&&(o+='<a href="'+t+'">'),o+e+"</a>"},o=function(o){return o.author?t(o.source)+" by "+o.author+" "+e(o.licenseUrl,o.license):""};return{create:function(t,e){return{getContent:function(n){if(e.image){var r='<img src="'+e.image+'" height="auto" width="auto" />'+o(e),i=createInfoWindowContentString(t,r);n(i)}}}}}}(),s11.ui.BlogExcerptContentProvider=function(){return{create:function(t,e,o){var n,r=function(e,o){n?o(n):t.getPost(e,function(t){n=t,o(t)})};return{getContent:function(t){e&&r(o,function(o){var n=createInfoWindowContentString(e,o);t(n)})}}}}}(),s11.ui.InfoWindow=function(){var t=factory.createInfoWindow();return configureInfowindow(t),{showFromEvent:function(t,e){var o=(t.pageX,factory.createLatLng(t.pageX,t.pageY)),n=s11.util.fromLatLngToPoint(o,e);this.show({latLng:n})},show:function(e){this.infoWindowContentProvider&&this.infoWindowContentProvider.getContent(function(o){o&&(t.setContent(o),t.setPosition(e.latLng),t.open(this.map))})}}}();var s11=s11||{};s11.geomodel=s11.geomodel||{};var factory=s11.geomodel.getFactory(),boundsCache={},focusser=factory.createMVCObject();s11.geomodel.getFocusser=function(){return focusser},factory.addEventListener(focusser,"part_changed",function(){var t=focusser.get("part");log(null===t?"Unfocus":"Set focus on "+t.name)});var isWithin=function(t,e){return t.within===e.name},checkCurrentFocus=function(t){return function(){var e=focusser.get("part");return null===e?void t.setVisible(!0):($.inArray(e,t.getParts())>=0?t.setVisible(!1):(t.setVisible(!0),t.getParts().forEach(function(o){isWithin(e,o)&&t.setVisible(!1)})),void e.setOptions({clickable:!1}))}},zoomOnPart=function(){var t=getPolygonBounds(this),e=this.parentRegion.getMap(),o=focusser.get("part");o&&o.setVisible(!0);e.getBounds();e.fitBounds(t),focusser.set("focusZoom",e.getZoom()),focusser.set("part",this)},containsBounds=function(t,e){return t.contains(e.getNorthEast())&&t.contains(e.getSouthWest())},getPolygonBounds=function(t){var e=boundsCache[t.get("id")];return e||(e=factory.createLatLngBounds(),t.getPath().forEach(function(t){e.extend(t)}),boundsCache[t.get("id")]=e),e};s11.geomodel.Feature=function(){var t;this.getMap=function(){return t},this.setMap=function(e){t=e}},s11.geomodel.Place=function(t){s11.geomodel.Feature.call(this);var e;t&&(e=t),factory.addEventListener(e,"mouseover",showPlaceTooltip),factory.addEventListener(e,"mouseout",s11.tooltip.hide),this.getMarker=function(){return e},this.setMarker=function(t){e=t};var o=this.setMap;this.setMap=function(t){o(t),e.setMap(t)}},s11.geomodel.MovingMarker=function(t){s11.geomodel.Place.call(this,t)},s11.geomodel.ColoredFeature=function(t){s11.geomodel.Feature.call(this);var e=t;this.getColor=function(){return e}},s11.geomodel.Region=function(t){s11.geomodel.ColoredFeature.call(this,t);var e=[],o=0;factory.addEventListener(focusser,"part_changed",checkCurrentFocus(this)),this.nextId=function(){return o++},this.getParts=function(){return e},this.clear=function(){map=null,r(function(t){t.setMap(null)}),e=[]},this.setVisible=function(e){r(function(o){o.setOptions({clickable:e,strokeColor:t})})};var n=this.setMap;this.setMap=function(t){n(t),r(function(e){e.setMap(t)})};var r=function(t){e&&e.forEach(t)}},s11.geomodel.Route=function(t){s11.geomodel.ColoredFeature.call(this,t);var e=[];this.getLegs=function(){return e},this.clear=function(){map=null,e&&e.forEach(function(t){t.setMap(null)}),e=[]};var o=this.setMap;this.setMap=function(t){o(t),e.forEach(function(e){e.setMap(t)})}},s11.geomodel.Trip=function(){s11.geomodel.Feature.call(this);var t=[],e=[],o=[];this.getPlaces=function(){return e},this.getRoutes=function(){return t},this.getRegions=function(){return o};var n=this.setMap;this.setMap=function(r){n(r),setFeatureMap(t,r),setFeatureMap(o,r),setFeatureMap(e,r)}},inherits(s11.geomodel.Trip,s11.geomodel.Feature),inherits(s11.geomodel.Place,s11.geomodel.Feature),inherits(s11.geomodel.MovingMarker,s11.geomodel.Place),inherits(s11.geomodel.ColoredFeature,s11.geomodel.Feature),inherits(s11.geomodel.Region,s11.geomodel.ColoredFeature),inherits(s11.geomodel.Route,s11.geomodel.ColoredFeature),s11.geomodel.Trip.prototype.addPlaces=function(t){this.addFeatures(t,this.getPlaces())},s11.geomodel.Trip.prototype.addRoutes=function(t){this.addFeatures(t,this.getRoutes())},s11.geomodel.Trip.prototype.addRegions=function(t){this.addFeatures(t,this.getRegions())},s11.geomodel.Trip.prototype.addFeatures=function(t,e){t instanceof Array?t.forEach(function(t){e.push(t)}):e.push(t)},s11.geomodel.Place.prototype.getPosition=function(){return this.getMarker().getPosition()},s11.geomodel.Place.prototype.setInfoWindowContentProvider=function(t){return this.getMarker().infoWindowContentProvider=t},s11.geomodel.Place.createFromData=function(t,e,o){var n={name:t,position:o};e&&(n.icon=e);var r=factory.createMarker(n),i=new s11.geomodel.Place(r);return i},s11.geomodel.Region.prototype.BORDER_STROKE_WEIGHT=1.5,s11.geomodel.Region.prototype.configureHighlighting=function(){this.getParts().forEach(function(t){factory.clearListeners(t,"mouseover"),factory.clearListeners(t,"mouseout"),factory.addEventListener(t,"mouseover",highlightRegion),factory.addEventListener(t,"mouseout",unhighlightRegion)})},s11.geomodel.Region.prototype.addPart=function(t,e){return t.setOptions({paths:t.getPaths(),strokeColor:this.getColor(),strokeOpacity:0,strokeWeight:s11.geomodel.Region.prototype.BORDER_STROKE_WEIGHT,fillColor:t.fillColor,fillOpacity:0,zIndex:e.type}),t.name=e.name,t.text=e.text,t.link=e.link,t.color=this.getColor(),t.parentRegion=this,t.within=e.within,factory.addEventListener(t,"dblclick",zoomOnPart),t.set("id",e.name+"_"+this.nextId()),t.setMap(this.getMap()),this.getParts().push(t),this.configureHighlighting(),t},s11.geomodel.Region.prototype.addParts=function(t){var e=t.geoJson;if(e instanceof Array){var o=[];return e.forEach(function(e){o.push(this.addPart(e,t))},this),o}return this.addPart(e,t)},s11.geomodel.MovingMarker.prototype.moveAlongRoute=function(t){var e=this,o=[];t.getLegs().forEach(function(t){o.push(t.getPath().getArray())});var n=pathFolder.foldPath(o),r=n,i=r.length,a=0;window.setInterval(function(){i>a&&(e.getMarker().setPosition(r[a]),a+=10)},10)},s11.geomodel.Route.prototype.addLeg=function(t,e){t.name=e,factory.addEventListener(t,"mouseover",highlightPath),factory.addEventListener(t,"mouseover",showRouteTooltip),factory.addEventListener(t,"mouseout",s11.tooltip.hide),factory.addEventListener(t,"mouseout",unhighlightPath),t.setMap(this.getMap()),this.getLegs().push(t)},s11.geomodel.Route.prototype.addLegFromLatLong=function(t,e,o){o||(o=40);var n=factory.createPolyline({path:t,strokeColor:this.getColor(),strokeOpacity:.5,strokeWeight:3,length:factory.computeLength(t)/1e3,zIndex:o});this.addLeg(n,e)},s11.geomodel.Route.prototype.addLegFromGeoJSON=function(t,e,o,n){t.forEach(function(t){t.strokeColor=this.getColor(),t.strokeOpacity=.5,t.strokeWeight=3,this.addLeg(t,e,o,n)},this)},s11.geomodel.Route.prototype.addLegFromEncodedPath=function(t,e){var o=factory.decodePath(t);this.addLegFromLatLong(o,e)},s11.geomodel.Route.prototype.addLegFromDirectionsService=function(t,e,o){function n(e,o){if(o===google.maps.DirectionsStatus.OK)r(e);else{if("ZERO_RESULTS"===o&&e.request.travelMode!==google.maps.TravelMode.DRIVING){window.alert("Could not find route for section "+e.request.origin+" to "+e.request.destination+". Falling back to driving");var i=createDirectionsRequest(e.request.origin,e.request.destination,google.maps.TravelMode.DRIVING);return void t.route(i,n)}window.alert("Directions request failed due to "+o)}}function r(t){g++;var o=t.routes[0].legs[0].steps,n=t.request.origin,r=t.request.destination,i=[];log("Received directions step from "+n+" to "+r),o.forEach(function(t){t.path.forEach(function(t){i.push(t)})}),h[n]=i,g===l&&(e.forEach(function(t){var e=h[t];e&&s.push(e)}),a.addLegFromLatLong(pathFolder.foldPath(s),u+" to "+c,u+" to "+c))}var a=this,s=[],u=e[0],c=e[e.length-1],l=e.length-1;for(log("Adding leg via directions from "+u+" to "+c),o||(o=google.maps.TravelMode.TRANSIT),i=1;i<=l;i++){var p=e[i-1],f=e[i],d=createDirectionsRequest(p,f,o);t.route(d,n)}var g=0,h={}},s11.geomodel.Route.prototype.getRouteEndpoint=function(){var t=this.getLegs(),e=t[this.getLegs().length-1],o=e.getPath(),n=o.getAt(o.length-1);return n};var setFeatureMap=function(t,e){t.forEach(function(t){t.setMap(e)})},pathFolder=function(){var t=[],e=function(e){return e.forEach(function(e){e.forEach(function(e){t.push(e)})}),t};return{foldPath:function(o){return t=[],e(o)}}}(),createDirectionsRequest=function(t,e,o){return{origin:t,destination:e,travelMode:o,transitOptions:{departureTime:new Date,modes:[google.maps.TransitMode.TRAIN],routingPreference:google.maps.TransitRoutePreference.FEWER_TRANSFERS}}},highlightPath=function(){this.setOptions({strokeWeight:5,strokeOpacity:1})},unhighlightPath=function(){this.setOptions({strokeWeight:3,strokeOpacity:.5})},showPlaceTooltip=function(){var t=this.getPosition();s11.tooltip.showOnMapPosition(t,this.name,0)},showRouteTooltip=function(t){var e=t.latLng;s11.tooltip.showOnMapPosition(e,this.name,30)},s11=s11||{};s11.controls=s11.controls||{};var factory=s11.geomodel.getFactory();s11.controls.ControlsContainer=function(t){var e=document.createElement("div");$(e).addClass("control-container").attr("id","top-center-controls"),e.index=1,t.controls[google.maps.ControlPosition.TOP_CENTER].push(e);var o=[];return{add:function(t,n,r){var i=new s11.controls.Control(e,t,n,r);o.push(i)},getAll:function(){return o}}},s11.controls.Control=function(t,e,o,n){var r=document.createElement("div");$(r).addClass("control-div"),t.appendChild(r);var i=document.createElement("div");$(i).addClass("control-button-div").css("background-image",'url("'+e+'")'),r.appendChild(i),i.addEventListener("click",function(t){n(t)}),$(i).hover(s11.tooltip.showFromEvent(o),s11.tooltip.hide)};var createShowTooltip=function(t){return function(e){var o=$("#gm-style-tt");o=o.html(createTooltipContent(t)).css({left:e.pageX+10,top:e.pageY+10}),o.show()}},s11=s11||{};s11.data=s11.data||{},s11.data.type={ROUTE:40,POI:30,PROVINCE:20,COUNTRY:10},s11.data.DataProvider=function(t,e,o,n){return routeTable=new s11.data.FusionTable(e,{key:t}),regionTable=new s11.data.FusionTable(o,{key:t}),placesTable=new s11.data.FusionTable(n,{key:t}),{selectAllVisibleRoutes:function(t){routeTable.select("route, encoded,name,content,color,ordering").where("route>0").orderBy("ordering").execute(t)},selectAllPlannedLegs:function(t){routeTable.select("encoded,name,content,ordering").where("route=1").orderBy("ordering").execute(t)},selectAllActualLegs:function(t){routeTable.select("encoded,name,content,ordering").where("route=2").orderBy("ordering").execute(t)},selectVisibleRegions:function(t){regionTable.select("name,text,link,type,within,custom_json,json_countries,json_provinces,json_lakes").where("visible=1").orderBy("type asc").execute(t)},selectVisiblePlaces:function(t){placesTable.select("name,content,icon,location, zoom").where("visible=1").orderBy("name desc").execute(function(e){t(e)})}}};var makeAddress=function(t,e,o,n,r){var i="https://www.googleapis.com/fusiontables/v2/query?sql="+t+o+e;return n&&(i+="&callback="+n),r&&(i+="&key="+r),i},callFusionTableApi=function(t,e,o,n){var r=document.createElement("script");r.setAttribute("src",makeAddress(t,e,o,n,key)),document.head.appendChild(r)};s11.data.insert=function(t,e,o,n,r,i,a,s){var u=" (type",c=" VALUES ("+t;if(t){(1===e||0===e)&&(u+=",visible",c+=","+e),o&&(u+=",name",c+=",'"+o+"'"),n&&(u+=",text",c+=",'"+n+"'"),r&&(u+=",link",c+=",'"+r+"'"),i&&(u+=",icon",c+=",'"+i+"'"),a&&(u+=",encoded",c+=",'"+a+"'"),s&&(u+=",json",c+=",'"+s+"'"),u+=")",c+=")";var l=makeQuery("INSERT INTO ",u+c);send("https://www.googleapis.com/fusiontables/v2/query",l)}};var map,trip=new s11.geomodel.Trip,s11=s11||{},factory=s11.geomodel.getFactory(),wpdata=wpdata||{},tripOptions;$(document).ready(function(){readOptions()}),s11.tooltip=function(){var t=!1,e=function(e){return function(o){if(!n)var n=0;t=!0,setTimeout(function(){if(!t)return void(delayFlag=!0);var n=$("#gm-style-tt");n=n.html(createTooltipContent(e)).css({left:o.pageX+10,top:o.pageY+10}),n.show()},1e3)}};return{showOnMapPosition:function(t,e,o){var n=s11.util.fromLatLngToPoint(t,map),r=$("#gm-style-tt");r=r.html(createTooltipContent(e)).css({left:n.x+10,top:n.y-o}),r.show()},showFromEvent:function(t){return e(t)},hide:function(){t=!1,$("#gm-style-tt").hide()}}}();var createTooltipContent=function(t){return'<div id="tooltip-content">'+t+"</div>"},logBuffer="",s11=s11||{},locationIndicator_PLUGIN_ID="locationIndicator",addCurrentLocation=function(t){var e="http://www.penceland.com/images/google_map_man.gif",o="https://big-vertex-117210.appspot.com/location/current";$.get(o,function(o,n){"success"===n&&(callback(o,t,e),s11.pluginLoader.onLoad(locationIndicator_PLUGIN_ID,!0))})},callback=function(t,e,o){var n=e.factory.createLatLng(t.coordinates[0],t.coordinates[1]),r=t.timestamp.split(" ")[0],i=s11.geomodel.Place.createFromData(r,o,n),a=e.map;e.trip.addPlaces(i),centerMap(t.coordinates[0],t.coordinates[1]);var s={lat:n.lat(),lng:n.lng()};addGeocodeInfo(s,i),e.controls.add("https://drive.google.com/uc?export=download&id=0B48vYXs63P2ld3RrcmtlM1pWYVU","Find me",function(){bounds=e.factory.createLatLngBounds(),bounds.extend(e.factory.createLatLng(i.getPosition().lat()+.2,i.getPosition().lng()+.2)),bounds.extend(e.factory.createLatLng(i.getPosition().lat()+.2,i.getPosition().lng()-.2)),bounds.extend(e.factory.createLatLng(i.getPosition().lat()-.2,i.getPosition().lng()+.2)),bounds.extend(e.factory.createLatLng(i.getPosition().lat()-.2,i.getPosition().lng()-.2)),e.map.fitBounds(bounds)}),e.factory.addEventListener(a,"zoom_changed",function(){i.setMap(a.getZoom()>=8?a:null)})};s11.pluginLoader.addPlugin(locationIndicator_PLUGIN_ID,function(t){addCurrentLocation(t)});var s11=s11||{},photoFeed_PLUGIN_ID="photoFeed",photoFeedWindow=function(){return{show:function(t,e,o,n){var r=s11.util.fromLatLngToPoint(t,n),i=$("#photoFeed-window");i=i.html(createXXXContent(e,o)).css({left:r.x,top:r.y}),i.show()},hide:function(){$("#photoFeed-window").hide()}}}(),createXXXContent=function(t,e){var o='<a href="'+e+'"  target="_blank"><img src="'+t+'" height="auto" width="auto" /></a>',n="<div >"+o+"</div>";return n},addPhotoFeed=function(t){var e=new MarkerClusterer(map,[],{gridSize:20,styles:[{url:"https://drive.google.com/uc?export=download&id=0B48vYXs63P2lYlRrcWJldllkQmc",width:25,height:25,textSize:10}]}),o="https://api.flickr.com/services/feeds/geo/?id="+t.tripOptions.flickrId+"&lang=en-us&format=json&georss=true&tagmode=any&tags="+t.tripOptions.flickrTags;console.log(o),jsonFlickrFeed=function(o){o.items.map(function(t){return{picture:t.media.m,flickrLink:t.link,date:t.date_taken,lat:t.latitude,lng:t.longitude}}).forEach(function(o){var n=t.factory.createLatLng(o.lat,o.lng),r=s11.geomodel.Place.createFromData("","https://drive.google.com/uc?export=download&id=0B48vYXs63P2lYlRrcWJldllkQmc",n);r.setMap(t.map),e.addMarker(r.getMarker()),t.factory.addEventListener(r.getMarker(),"mouseout",function(){photoFeedWindow.hide()}),t.factory.addEventListener(r.getMarker(),"click",function(){window.open(o.flickrLink)}),t.factory.addEventListener(r.getMarker(),"mouseover",function(e){photoFeedWindow.show(e.latLng,o.picture,o.flickrLink,t.map)})})},$.ajax({url:o,data:{format:"json"},dataType:"jsonp"}),s11.pluginLoader.onLoad(photoFeed_PLUGIN_ID,!0)},createPhotoWindowContent=function(t,e){var o='<a href="'+e+'"  target="_blank"><img src="'+t+'" height="auto" width="auto" /></a>',n='<div id="iw-container"><div class="iw-content">'+o+"</div></div>";return n};s11.pluginLoader.addPlugin(photoFeed_PLUGIN_ID,function(t){addPhotoFeed(t)});var s11=s11||{};s11.data=s11.data||{},s11.ui=s11.ui||{};var places_PLUGIN_ID="places",addPlaces=function(t){var e=t.tripOptions,o=new s11.data.DataProvider(e.fusionTableApiKey,e.routeDataTableId,e.regionDataTableId,e.placeDataTableId);o.selectVisiblePlaces(placesDataHandler(t))},checkIfVisible=function(t,e,o){t.map.getZoom()<=o.max&&map.getZoom()>=o.min?e.getMarker().setMap(t.map):e.getMarker().setMap(null)},configureVisibility=function(t,e,o){var n=JSON.parse(t);n.max=n.max?n.max:100,n.min=n.min?n.min:-1,o.factory.addEventListener(o.map,"zoom_changed",function(){checkIfVisible(o,e,n)}),checkIfVisible(o,e,n)};s11.pluginLoader.addPlugin(places_PLUGIN_ID,function(t){addPlaces(t)});var s11=s11||{},async=async||{},routes_regions_PLUGIN_ID="routes_regions",getRegionDef=function(t){var e={name:t[0],text:t[1],link:t[2],type:t[3],within:t[4]};for(i=5;i<=8;i++)if(t[i])return e.geoJson=parseGeoJson(t[i]),e},parseGeoJson=function(t){var e=$.parseJSON(t);return s11.util.loadGeoJSON(e,{strokeColor:"#000000",strokeOpacity:1,strokeWeight:1,fillColor:"#AAAAAA",fillOpacity:.5})},routeDataHandlerJson=function(t,e,o,n){e.rows&&(e.rows.forEach(function(e){if(e[0]){var o=parseGeoJson(e[0]);t.addLegFromGeoJSON(o,"Mekong","",""),log("Adding leg "+e[1])}}),t.setMap(o),n&&n(null,"route"))},routeDataHandler=function(t,e,o){if(t.rows){var n=[];t.rows.forEach(function(t){var o=t[0]-1;n[o]||(n[o]=new s11.geomodel.Route(t[4]),n[o].setMap(e.map))}),t.rows.forEach(function(t){if(t[0]){var o=n[t[0]-1];o.addLegFromEncodedPath(t[1],t[2]);var r=o.getLegs()[o.getLegs().length-1];r.infoWindowContentProvider=s11.ui.getContentProvider(t[3],t[2],e.wpApi),e.factory.addEventListener(r,"click",s11.ui.InfoWindow.show),log("Adding leg "+t[2])}}),e.trip.addRoutes(n),o&&o(null,"route")}};s11.pluginLoader.addPlugin(routes_regions_PLUGIN_ID,function(t){addRoutesAndRegions(t)});var s11=s11||{},helpControl_PLUGIN_ID="helpControl",showHelp=function(t,e){var o=function(){var t="block";return function(){e.css({display:t}),t="block"===t?"none":"block"}}();t.controls.add("https://drive.google.com/uc?export=download&id=0B48vYXs63P2lbUFBeFRYX2g5ZDA","What is this all about?",function(t){o()})},appendDiv=function(t,e,o){t.append("<div id='"+e+"' ></div>");var n=$("#"+e);return o.forEach(function(t){n.addClass(t)}),n};s11.pluginLoader.addPlugin(helpControl_PLUGIN_ID,function(t){var e=appendDiv($("#googleMap"),"about-window",["gm-style-iw"]),o=appendDiv(e,"about-window-content",["about-window-content"]);o.html("This website is about my trip from Frankfurt to Southern Asia. You can read a <a href='#'>blog post</a> for more info about the trip.<p>You can use the map to look at the route that I am taking, the places I have been to, photos, and a lot more. Many items on the map are clickable and show you some info or pictures. Somethimes there is also a corresponding blog post, which will be loaded when you click the 'Continue Reading' link.<p>The route I have already travelled is shown in blue, the route I am planning to travel in the future is shown in gray, and the 'Find Me' button on the top of the map shows the place where I am right now.<br>When you move the cursor over a country or region that is part of my trip, you can see the region highlighted. You can double click to center the map on that region then.<p>If you just want to look at the blog posts without the map, click 'Hide Map' in the menu bar or scroll down in the area below the map. To show the map again, click 'Show Map' or scroll to the top of the page.<p>If you are interested in the technical aspects, have a look at <a href='http://hundredtickets.net/category/technology' class='menu-item-object-category'>the posts</a> I wrote about how I developed the website.");var n=appendDiv(e,"about-window-footer",["about-window-footer"]);appendDiv(n,"about-window-divider-1",["about-window-button"]);var r=appendDiv(n,"about-window-close-button",["about-window-button"]);r.html("<a href='#'>Close</a>"),appendDiv(n,"about-window-divider-2",["about-window-button"]),r.click(function(){$("#about-window").css({display:"none"})}),r.css("cursor","pointer"),showHelp(t,e)});